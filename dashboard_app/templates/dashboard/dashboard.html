{% extends "web_project/base.html" %}
{% load static %}
{% block title %}
Dashboard
{% endblock %}
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script> -->
<!--  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>    
<script type="text/javascript" src="{% static 'js/Chart.min.js' %}"></script>
--> 
{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>
<div class="container">
<div class="row d-flex justify-content-end mt-2">
{% if user.is_authenticated %}
    Seja bem-vindo, {{ user.first_name }}!  
{% else %}
    Você não está logado!
 {% endif %}
</div>
<div class="row">
<div class="row">
    <div class="col-4 pt-3">
      <p>
        Solicitações ativas: {{total_solicitacoes}}
 </p>
        <canvas id="pie-chart" width="500" height="500"></canvas>
  
        <script>
            var config = {
              type: 'doughnut',
              data: {
                        datasets: [{
                            data: {{ data|safe }},
                    // backgroundColor: ['#696969', '#808080', '#A9A9A9', '#C0C0C0', '#D3D3D3'],
                    label: 'Solicitações'
                }],
                labels: {{ labels|safe }}
              },
              options: {
                responsive: true
              }
            };
        
            window.onload = function() {
              var ctx = document.getElementById('pie-chart').getContext('2d');
              window.myPie = new Chart(ctx, config);
            };
        
          </script>
    </div>
    <div class="col-4 pt-3 ml-3" >
    </di>
</div>
</div>
</div>
{% endblock %}